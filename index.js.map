{"version":3,"file":"index.js","sources":["../src/js/init.js","../src/main.js"],"sourcesContent":["window.global ||= window;\n","import './js/init';\n// Dokümantasyonda belirtilen import\nimport iziToast from 'izitoast';\n// Stil importu\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Kullanılacak kısmın import edilmesi\nimport SimpleLightbox from 'simplelightbox';\n// Ek stillerin eklenmesi\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\nrequire('dotenv').config();\n\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n let simplo = new SimpleLightbox('.gallery-list a', {\n   captionsData: 'alt',\n   captionDelay: 250,\n });\n\nconst form = document.querySelector('#search-form');\nconst loader = document.querySelector('#loader');\nconst btnLoadMore = document.querySelector('#load-more');\nconst galleryList = document.querySelector('.gallery-list');\nlet totalPage = 0;\nlet params = {\n  key: process.env.API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: 1,\n  per_page:20\n};\nbtnLoadMore.classList.add('pasif');\nform.addEventListener('submit', async evt => {\n  evt.preventDefault();\n  loader.classList.add('loader');\n  params.q = evt.currentTarget.elements.query.value.trim();\n  params.page = 1;\n\n  try {\n    const data = await fetchPixabay(params);\n    if (data.hits.length <= 0) {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n    totalPage = Math.ceil(data.totalHits  / params.per_page);\n    \n    if (totalPage > params.page) {\n       params.page += 1;\n       btnLoadMore.classList.remove('pasif');\n    }\n   \n    \n    const galleryMarkup = markup(data.hits);\n    galleryList.innerHTML = galleryMarkup;\n    loader.classList.remove('loader');\n   \n    simplo.refresh();\n  } catch (error) {\n    iziToast.error({\n      message: `${error}`,\n      position: 'topRight',\n    });\n    galleryList.innerHTML = '';\n    loader.classList.remove('loader');\n  }\n\n  form.reset();\n});\nbtnLoadMore.addEventListener(\"click\",async () => {\n  \n  try {\n    const data = await fetchPixabay(params);\n    const galleryMarkup = markup(data.hits);\n    galleryList.insertAdjacentHTML(\"beforeend\",galleryMarkup)\n    // galleryList.innerHTML += galleryMarkup;\n    simplo.refresh();\n    params.page += 1;\n    if (totalPage < params.page) {\n      btnLoadMore.classList.add(\"pasif\");\n      params.page = 1;\n        throw new Error(\n          \"We're sorry, but you've reached the end of search results\"\n      );\n      \n    }\n    if (document.querySelector('.card')) {\n      window.scrollBy(0, 2 * cardHeight());\n    }\n    \n   \n    \n  } catch (error) {\n    iziToast.info({\n      position: 'topRight',\n      message: `${error}`,\n    });\n  }\n  \n  \n});\nconst fetchPixabay = async params => {\n  const response = await axios.get('/', { params });\n  return response.data;\n};\nconst markup = data => {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n            <li class=\"card\">\n              <div class=\"card-image\">\n               <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                 <img src=\"${webformatURL}\"  alt=\"${tags}\" class=\"gallery-image\"/>\n               </a>\n             </div>\n              <ul class=\"card-info\">\n                <li class=\"info-item\">\n                   <h3>Likes</h3>\n                   <p>${likes}</p>\n                </li>\n                <li class=\"info-item\">\n                  <h3>Views</h3>\n                  <p>${views}</p>\n                </li>\n                <li class=\"info-item\">\n                  <h3>Comments</h3>\n                  <p>${comments}</p>\n               </li>\n               <li class=\"info-item\">\n                 <h3>Downloads</h3>\n                 <p>${downloads}</p>\n               </li>\n             </ul>\n        </li>`;\n      }\n    )\n    .join('');\n};\n\nconst cardHeight = () => {\n  let elem = document.querySelector('.card');\n  let rect = elem.getBoundingClientRect();\n  let height = rect.height;\n  return height;\n};"],"names":["axios","simplo","SimpleLightbox","form","loader","btnLoadMore","galleryList","totalPage","params","define_process_env_default","evt","data","fetchPixabay","galleryMarkup","markup","error","iziToast","cardHeight","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"owBAAA,OAAO,SAAP,OAAO,OAAW,iBCWlB,QAAQ,QAAQ,EAAE,SAGlBA,EAAM,SAAS,QAAU,0BACxB,IAAIC,EAAS,IAAIC,EAAe,kBAAmB,CACjD,aAAc,MACd,aAAc,GAChB,CAAC,EAEF,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAc,SAAS,cAAc,eAAe,EAC1D,IAAIC,EAAY,EACZC,EAAS,CACX,IAAKC,EAAY,QACjB,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAM,EACN,SAAS,EACX,EACAJ,EAAY,UAAU,IAAI,OAAO,EACjCF,EAAK,iBAAiB,SAAU,MAAMO,GAAO,CAC3CA,EAAI,eAAe,EACZN,EAAA,UAAU,IAAI,QAAQ,EAC7BI,EAAO,EAAIE,EAAI,cAAc,SAAS,MAAM,MAAM,OAClDF,EAAO,KAAO,EAEV,GAAA,CACI,MAAAG,EAAO,MAAMC,EAAaJ,CAAM,EAClC,GAAAG,EAAK,KAAK,QAAU,EACtB,MAAM,IAAI,MACR,0EAAA,EAGJJ,EAAY,KAAK,KAAKI,EAAK,UAAaH,EAAO,QAAQ,EAEnDD,EAAYC,EAAO,OACpBA,EAAO,MAAQ,EACHH,EAAA,UAAU,OAAO,OAAO,GAIjC,MAAAQ,EAAgBC,EAAOH,EAAK,IAAI,EACtCL,EAAY,UAAYO,EACjBT,EAAA,UAAU,OAAO,QAAQ,EAEhCH,EAAO,QAAQ,QACRc,EAAO,CACdC,EAAS,MAAM,CACb,QAAS,GAAGD,CAAK,GACjB,SAAU,UAAA,CACX,EACDT,EAAY,UAAY,GACjBF,EAAA,UAAU,OAAO,QAAQ,CAClC,CAEAD,EAAK,MAAM,CACb,CAAC,EACDE,EAAY,iBAAiB,QAAQ,SAAY,CAE3C,GAAA,CACI,MAAAM,EAAO,MAAMC,EAAaJ,CAAM,EAChCK,EAAgBC,EAAOH,EAAK,IAAI,EAKlC,GAJQL,EAAA,mBAAmB,YAAYO,CAAa,EAExDZ,EAAO,QAAQ,EACfO,EAAO,MAAQ,EACXD,EAAYC,EAAO,KACT,MAAAH,EAAA,UAAU,IAAI,OAAO,EACjCG,EAAO,KAAO,EACN,IAAI,MACR,2DAAA,EAIF,SAAS,cAAc,OAAO,GAChC,OAAO,SAAS,EAAG,EAAIS,EAAY,CAAA,QAK9BF,EAAO,CACdC,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,GAAGD,CAAK,EAAA,CAClB,CACH,CAGF,CAAC,EACD,MAAMH,EAAe,MAAMJ,IACR,MAAMR,EAAM,IAAI,IAAK,CAAE,OAAAQ,EAAQ,GAChC,KAEZM,EAAiBH,GACdA,EACJ,IACC,CAAC,CACC,aAAAO,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CAAA,IAEO;AAAA;AAAA;AAAA,+CAGgCL,CAAa;AAAA,6BAC/BD,CAAY,WAAWE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAMhCC,CAAK;AAAA;AAAA;AAAA;AAAA,uBAINC,CAAK;AAAA;AAAA;AAAA;AAAA,uBAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,sBAITC,CAAS;AAAA;AAAA;AAAA,cAIzB,EAED,KAAK,EAAE,EAGNP,EAAa,IACN,SAAS,cAAc,OAAO,EACzB,wBACE"}