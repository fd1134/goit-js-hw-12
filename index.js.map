{"version":3,"file":"index.js","sources":["../src/js/init.js","../src/main.js"],"sourcesContent":["window.global ||= window;\n","import './js/init';\n// Dokümantasyonda belirtilen import\nimport iziToast from 'izitoast';\n// Stil importu\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Kullanılacak kısmın import edilmesi\nimport SimpleLightbox from 'simplelightbox';\n// Ek stillerin eklenmesi\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\n\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n let simplo = new SimpleLightbox('.gallery-list a', {\n   captionsData: 'alt',\n   captionDelay: 250,\n });\n\nconst form = document.querySelector('#search-form');\nconst loader = document.querySelector('#loader');\nconst btnLoadMore = document.querySelector('#load-more');\nconst galleryList = document.querySelector('.gallery-list');\nconst API_KEY = '48271120-e478f6712aa82518e8481b3a8';\nlet totalPage = 0;\nlet params = {\n  key:API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: 1,\n  per_page:20\n};\nbtnLoadMore.classList.add('pasif');\nform.addEventListener('submit', async evt => {\n  evt.preventDefault();\n  loader.classList.add('loader');\n  params.q = evt.currentTarget.elements.query.value.trim();\n  params.page = 1;\n\n  try {\n    const data = await fetchPixabay(params);\n    if (data.hits.length <= 0) {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n    totalPage = Math.ceil(data.totalHits  / params.per_page);\n    \n    if (totalPage > params.page) {\n       params.page += 1;\n       btnLoadMore.classList.remove('pasif');\n    }\n   \n    \n    const galleryMarkup = markup(data.hits);\n    galleryList.innerHTML = galleryMarkup;\n    loader.classList.remove('loader');\n   \n    simplo.refresh();\n  } catch (error) {\n    iziToast.error({\n      message: `${error}`,\n      position: 'topRight',\n    });\n    galleryList.innerHTML = '';\n    loader.classList.remove('loader');\n  }\n\n  form.reset();\n});\nbtnLoadMore.addEventListener(\"click\",async () => {\n  \n  try {\n    const data = await fetchPixabay(params);\n    const galleryMarkup = markup(data.hits);\n    galleryList.insertAdjacentHTML(\"beforeend\",galleryMarkup)\n    // galleryList.innerHTML += galleryMarkup;\n    simplo.refresh();\n    params.page += 1;\n    if (totalPage < params.page) {\n      btnLoadMore.classList.add(\"pasif\");\n      params.page = 1;\n        throw new Error(\n          \"We're sorry, but you've reached the end of search results\"\n      );\n      \n    }\n    if (document.querySelector('.card')) {\n      window.scrollBy(0, 2 * cardHeight());\n    }\n    \n   \n    \n  } catch (error) {\n    iziToast.info({\n      position: 'topRight',\n      message: `${error}`,\n    });\n  }\n  \n  \n});\nconst fetchPixabay = async params => {\n  const response = await axios.get('/', { params });\n  return response.data;\n};\nconst markup = data => {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n            <li class=\"card\">\n              <div class=\"card-image\">\n               <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                 <img src=\"${webformatURL}\"  alt=\"${tags}\" class=\"gallery-image\"/>\n               </a>\n             </div>\n              <ul class=\"card-info\">\n                <li class=\"info-item\">\n                   <h3>Likes</h3>\n                   <p>${likes}</p>\n                </li>\n                <li class=\"info-item\">\n                  <h3>Views</h3>\n                  <p>${views}</p>\n                </li>\n                <li class=\"info-item\">\n                  <h3>Comments</h3>\n                  <p>${comments}</p>\n               </li>\n               <li class=\"info-item\">\n                 <h3>Downloads</h3>\n                 <p>${downloads}</p>\n               </li>\n             </ul>\n        </li>`;\n      }\n    )\n    .join('');\n};\n\nconst cardHeight = () => {\n  const elem = document.querySelector('.card');\n  if (!elem) return 0;\n  return elem.getBoundingClientRect().height;\n};"],"names":["axios","simplo","SimpleLightbox","form","loader","btnLoadMore","galleryList","API_KEY","totalPage","params","evt","data","fetchPixabay","galleryMarkup","markup","error","iziToast","cardHeight","webformatURL","largeImageURL","tags","likes","views","comments","downloads","elem"],"mappings":"owBAAA,OAAO,SAAP,OAAO,OAAW,QCclBA,EAAM,SAAS,QAAU,0BACxB,IAAIC,EAAS,IAAIC,EAAe,kBAAmB,CACjD,aAAc,MACd,aAAc,GACjB,CAAE,EAEF,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAU,qCAChB,IAAIC,EAAY,EACZC,EAAS,CACX,IAAIF,EACJ,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAM,EACN,SAAS,EACX,EACAF,EAAY,UAAU,IAAI,OAAO,EACjCF,EAAK,iBAAiB,SAAU,MAAMO,GAAO,CAC3CA,EAAI,eAAc,EAClBN,EAAO,UAAU,IAAI,QAAQ,EAC7BK,EAAO,EAAIC,EAAI,cAAc,SAAS,MAAM,MAAM,OAClDD,EAAO,KAAO,EAEd,GAAI,CACF,MAAME,EAAO,MAAMC,EAAaH,CAAM,EACtC,GAAIE,EAAK,KAAK,QAAU,EACtB,MAAM,IAAI,MACR,0EACR,EAEIH,EAAY,KAAK,KAAKG,EAAK,UAAaF,EAAO,QAAQ,EAEnDD,EAAYC,EAAO,OACpBA,EAAO,MAAQ,EACfJ,EAAY,UAAU,OAAO,OAAO,GAIvC,MAAMQ,EAAgBC,EAAOH,EAAK,IAAI,EACtCL,EAAY,UAAYO,EACxBT,EAAO,UAAU,OAAO,QAAQ,EAEhCH,EAAO,QAAO,CACf,OAAQc,EAAO,CACdC,EAAS,MAAM,CACb,QAAS,GAAGD,CAAK,GACjB,SAAU,UAChB,CAAK,EACDT,EAAY,UAAY,GACxBF,EAAO,UAAU,OAAO,QAAQ,CACjC,CAEDD,EAAK,MAAK,CACZ,CAAC,EACDE,EAAY,iBAAiB,QAAQ,SAAY,CAE/C,GAAI,CACF,MAAMM,EAAO,MAAMC,EAAaH,CAAM,EAChCI,EAAgBC,EAAOH,EAAK,IAAI,EAKtC,GAJAL,EAAY,mBAAmB,YAAYO,CAAa,EAExDZ,EAAO,QAAO,EACdQ,EAAO,MAAQ,EACXD,EAAYC,EAAO,KACrB,MAAAJ,EAAY,UAAU,IAAI,OAAO,EACjCI,EAAO,KAAO,EACN,IAAI,MACR,2DACV,EAGQ,SAAS,cAAc,OAAO,GAChC,OAAO,SAAS,EAAG,EAAIQ,EAAY,CAAA,CAKtC,OAAQF,EAAO,CACdC,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,GAAGD,CAAK,EACvB,CAAK,CACF,CAGH,CAAC,EACD,MAAMH,EAAe,MAAMH,IACR,MAAMT,EAAM,IAAI,IAAK,CAAE,OAAAS,CAAM,CAAE,GAChC,KAEZK,EAASH,GACNA,EACJ,IACC,CAAC,CACC,aAAAO,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA;AAAA,+CAGgCL,CAAa;AAAA,6BAC/BD,CAAY,WAAWE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAMhCC,CAAK;AAAA;AAAA;AAAA;AAAA,uBAINC,CAAK;AAAA;AAAA;AAAA;AAAA,uBAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,sBAITC,CAAS;AAAA;AAAA;AAAA,cAK1B,EACA,KAAK,EAAE,EAGNP,EAAa,IAAM,CACvB,MAAMQ,EAAO,SAAS,cAAc,OAAO,EAC3C,OAAKA,EACEA,EAAK,sBAAuB,EAAC,OADlB,CAEpB"}